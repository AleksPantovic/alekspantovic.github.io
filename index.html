<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Haiilo Plugin - Entry Points Data</title>
  <script src="https://static.haiilo.io/plugin-sdk/v1.js"></script>
</head>
<body>
  <h1>Entry Points Data</h1>
  <ul id="entrypoints"></ul>

  <h2>Plugin Config Fields</h2>
  <div id="config-values">Loading...</div>

  <script type="module">
    if (window.haiiloPlugin && window.haiiloPlugin.initialize) {
      window.haiiloPlugin.initialize().then(context => {
        const config = context.config || {};

        document.getElementById('config-values').innerHTML = `
          <div>API Key: <b>${config.apiKey || "Not set"}</b></div>
          <div>Custom Title: <b>${config.customTitle || "Not set"}</b></div>
        `;
      }).catch(error => {
        document.getElementById('config-values').innerText = "Init failed: " + error;
      });
    } else {
      document.getElementById('config-values').innerText = "Haiilo plugin SDK not available.";
    }
  </script>
</body>
</html>
      const ul = document.getElementById('entrypoints');
      for (const ep of entryPoints) {
        fetch(ep.url)
          .then(res => res.text())
          .then(data => {
            const li = document.createElement('li');
            li.textContent = `ID: ${ep.id}, URL: ${ep.url}, Data: ${data}`;
            ul.appendChild(li);
          })
          .catch(err => {
            const li = document.createElement('li');
            li.textContent = `ID: ${ep.id}, URL: ${ep.url}, Error: ${err}`;
            ul.appendChild(li);
          });
      }
    }).catch(error => {
      document.getElementById('config-values').innerText = "Failed to load Haiilo context: " + error;
    });
  </script>
</body>
</html>
